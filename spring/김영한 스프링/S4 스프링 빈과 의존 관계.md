# S4 스프링 빈과 의존 관계

---

---

# 1. 컴포넌트 스캔과 자동 의존 관계 설정

컨트롤러의 기능을 서비스를 통해서 동작 시킴

→ 컨트롤러가 서비스를 의존한다 

### 스프링 빈 등록 방법

- 컴포넌트 스캔 & 자동 의존 관계 방법
    - Application 하위 컴포넌트만 자동으로 컴포넌트 스캔함
- 자바 코드를 이용하여 직접 스프링 빈 등록

### 컴포넌트 스캔 관련 Annotation

@Controller # Controller annotation은 스프링이 뜰 때 객체를 생성하여 가지고 있음

@Service # 스프링이 스프링 컨테이너에 서비스라고 등록

@Repository

→ 위에 있는 어노테이션들은 모두 Component와 관련된 어노테이션

→ 스프링은 컴포넌트와 관련된 어노테이션이 있으면 모두 스프링 컨테이너에 객체 생성하여 등록해둠

→ @Autowired가 의존 관계를 주입하여 사용할 수 있게 만들어줌

@Autowired

- IoC 컨테이너의 객체간의 의존관계 주입을 위해서 사용함
- 컴포넌트로 등록이 되어 있던가, 직접 등록한 객체, 즉 스프링 빈으로 등록된 객체만 Autowired가 적용됨

### 스프링 빈

- IoC 컨테이너가 관리하는 자바 객체

### 컴포넌트 스캔을 통한 자동으로 스프링 빈 등록 방법

- 위에서 사용한 어노테이션을 통한 연결이 컴포넌트 스캔 방식
- 어플리케이션이 포함된 패키지 하위에 위치한 클래스들만 자동으로 등록 되는 대상임
- 스프링 컨테이너에 등록한 스프링 빈은 기본적으로 싱글톤으로 등록됨

---

# 2. 자바 코드로 직접 스프링빈 등록하기

위 Annotaion없이 직접 등록하는 방법

장점 : 중간에 Repository 등의 클래스를 바꿔치기 해야할 때 의존 관계를 하나의 파일에서 관리하고, 적용하므로 손쉽게 수정이 가능함

### 자바 코드를 이용한 스프링 빈 등록 방법

1) Application과 동일한 위치에 Config 클래스 생성

2) @Configuration 사용

3) @Bean을 사용하여 등록

- 컨트롤러는 어쩔 수 없이 컴포넌트를 이용하여 설정해 주어야 함

### 의존성 주입(DI) 방법

- 생성자 주입 : 가장 추천하는 방식
- 필드 주입 : 수정이 불가능함
- setter 주입 : public하게 노출되어 있음
    
    → 의존관계가 동적으로 변하는 일이 없으므로 고정되는 생성자 주입을 추천