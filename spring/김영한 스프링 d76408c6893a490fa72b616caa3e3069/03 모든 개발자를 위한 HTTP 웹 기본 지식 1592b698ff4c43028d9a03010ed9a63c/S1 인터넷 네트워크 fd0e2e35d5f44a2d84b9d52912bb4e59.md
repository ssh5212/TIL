# S1 인터넷 네트워크

---

---

# 인터넷 통신

클라이언트와 서버가 붙어있다면 : 연결된 케이블로 전달

인터넷으로 연결되어 있다면 : 인터넷 망을 통해서 전달

해저 광케이블, 인공위성 등 다양한 노드를 통해서 전달됨

# IP (인터넷 프로토콜)

데이터를 주고 받기 위한 최소한의 규칙

클라이언트, 서버가 IP주소를 부여 받아야함

### 인터넷 프로토콜의 역할

아이피 주소에 데이터를 전달

패킷 단위로 전달

### IP 패킷 정보

나의 IP, 목적지 IP 등으로 패킷을 만듦

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled.png)

### 패킷 전달

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%201.png)

모든 노드는 규약을 따르고 있으므로 패킷을 이해하고 노드끼리 던져서 결과적으로 목표 서버에 도달됨

### IP 프로토콜의 한계

- 비연결성
    - 패킷을 받을 대상이 없거나 서비스 불능 상태에도 패킷이 전송
    - 서버가 꺼져 있거나 연결되어 있지 않더라도 그냥 전달
    
    ![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%202.png)
    
- 비신뢰성
    - 내가 던진 패킷이 중간에 사라지는 경우를 해결할 수 없음
        
        ![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%203.png)
        
    - 패킷이 순서대로 오지 않는 경우를 해결할 수 없음
        
        ![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%204.png)
        
- 프로그램 구분
    - 같은 IP를 사용하는 서버의 통신하는 프로그램이 여러 개일 때 구분이 어려움
    - 인터넷으로 게임도하고, 노래도 들으면 구분이 불가

→ IP의 문제를 해결한 것이 TCP, UDP임

# TCP / UDP

IP는 패킷 소실, 순서가 꼬이는 문제가 있었음

## 인터넷 프로토콜의 4계층

- 어플리케이션 계층 - HTTP, FTP
- 전송 계층 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

## 프로토콜 계층

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%205.png)

- 메시지 전송 예제
    
    1) OS 계층에 메세지 전달
    
    2) OS계층에서 TCP 데이터를 씌움
    
    3) IP 데이터를 씌움
    
    4) 이더넷 프레임을 포함하여 전달 (MAC 주소)
    

## IP 패킷

패킷 : 패키지 + 버킷의 합성어

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%206.png)

- 출발지 IP
- 목적지 IP

## TCP/IP 패킷

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%207.png)

- IP 패킷 안에 TCP 정보를 포함함

- 출발지 PORT
- 전송 제어, 순서, 검증 정보 포함

## TCP 특징

전송 제어 프로토콜

- 연결지향 (3 way handshake) : 연결이 되었는지 아닌지를 확인 후 메세지를 보냄
- 데이터 전달 보증 : 데이터 누락을 알 수 있음
- 순서 보장
- 신뢰할 수 있는 프로토콜
- 현재는 대부분 TCP 사용

## TCP 3 way handshake

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%208.png)

1) 연결해달라는 의미의 SYN 메시지 보냄

2) SYN 메시지를 받으면 받았다는 의미로 ACK를 보냄 + 연결해달라는 의미의 SYN 메시지 보냄

3) ACK를 보냄

→ 클라이언트도 서버를 믿을 수 있고, 서버도 클라이언트를 믿을 수 있음

4) 연결 완료 후 데이터를 주고 받음

SYN 메시지를 보냈는데 ACK를 받지 못하면 데이터를 보내지 않음

3 way handshake는 가상연결임 → 논리적으로 연결이 되었다는 의미 (물리적으로는 수많은 노드를 지나감) → 나를 위한 전용 랜선이 보장된 것이 아님

## 데이터 전달 보증

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%209.png)

- TCP/IP에서는 데이터를 보내면 데이터를 잘 받았다는 응답을 보냄
- 응답이 없다면 문제가 없다는 것을 인지할 수 있음

## 순서 보장

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2010.png)

- 내부적으로 1, 3, 2로 도착했으면, 2번부터 다시 보내라고 요청
- 최적화로 일어나는 새로운 방식이 있을 수 있음
    
    → 안에 전송 제어, 순서, 검증 정보 등이 포함되어 있기 때문에 가능한 것
    
    → 신뢰할 수 있는 프로토콜이다
    

## UDP 특징

- 하얀 도화지 (기능이 거의 없음)
- 연결 지향 x
- 데이터 전달 보증 x
- 순서 보장 x

- IP + Port + 체크섬
- 어플리케이션에서 추가 작업이 필요함

- TCP와 UDP는 포트 정보를 가진다
    
    → IP는 포트를 가지지 않음
    
- 포트의 역할 : 하나의 IP에서 여러 어플리케이션(게임, 음악)을 사용할 때, 하나의 IP로 여러 패킷이 올 수 있음 → 패킷을 구분하기 위해서 사용함
- 체크섬 : 메시지가 올바른지 검증

- 3 way handshake로 느리고 TCP 세그먼트 등으로 무거운 TCP보다 가볍고 빠르다는 장점이 있음

# Port

## 한 번에 둘 이상 연결이 필요한 경우

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2011.png)

- 어떤 어플리케이션에서 필요한 패킷인지 구분을 위해서 port을 사용함

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2012.png)

- IP : 목적지 서버
- Port : 어플리케이션 구분

## TCP/IP 패킷 정보

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2013.png)

## TCP : 같은 IP 내에서 프로세스 구분

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2014.png)

- 웹 브라우저 요청 시 200.200.200.3:80으로 요청함
- 요청에 대한 응답으로 100.100.100.1:10010으로 전달 (TCP/IP에 출발지 정보가 있으므로 가능)

→ IP가 아파트, Port는 동호수

## Port

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2015.png)

# DNS

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2016.png)

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2017.png)

- IP는 기억하기 어려움
- IP는 바뀔 수 있음 (바뀌면 접근이 어려움)

## DNS 시스템

- Domain Name System
- 전화번호부
- 도메인 명을 IP 주소로 변환

## DNS 사용

![Untitled](S1%20%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%90%E1%85%A5%E1%84%82%E1%85%A6%E1%86%BA%20%E1%84%82%E1%85%A6%E1%84%90%E1%85%B3%E1%84%8B%E1%85%AF%E1%84%8F%E1%85%B3%20fd0e2e35d5f44a2d84b9d52912bb4e59/Untitled%2018.png)

0) 도메인으로 접근

1) 도메인 서버에 요청

2) 도메인 서버가 IP 주소 응답

3) IP 주소로 접속

# 정리

- IP : 인터넷 통신을 위해서 필요함
- TCP : 메시지 도착 신뢰를 높임, 포트를 통해서 어플리케이션 구분
- UDP : IP + Port
- Port : 같은 IP 안에서 어플리케이션 구분을 위해서 사용함
- DNS : IP를 도메인 명으로 바꿔서 사용할 수 있음